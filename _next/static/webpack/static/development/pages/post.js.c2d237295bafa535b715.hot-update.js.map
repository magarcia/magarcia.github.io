{"version":3,"file":"static/webpack/static/development/pages/post.js.c2d237295bafa535b715.hot-update.js","sources":["webpack:///./components/PWithIframe.js","webpack:///./pages/post.js"],"sourcesContent":["import PropTypes from 'prop-types';\n\nconst PWithIframe = ({ children }) => {\n  if (children[0] === '!(') {\n    return (\n      <iframe\n        src={children[1].props.href}\n        title={children[1].props.href}\n        frameBorder=\"0\"\n        width=\"700\"\n        height=\"394\"\n        allowFullScreen\n      />\n    );\n  }\n  return <p>{children}</p>;\n};\n\nPWithIframe.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired\n};\n\nexport default PWithIframe;\n","import { withRouter } from 'next/router';\nimport { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport matter from 'gray-matter';\nimport getReadingTime from 'reading-time';\nimport moment from 'moment';\nimport remark from 'remark';\nimport reactRender from 'remark-react';\nimport lowlight from 'remark-react-lowlight';\nimport githubSchema from 'hast-util-sanitize/lib/github.json';\nimport ts from 'highlight.js/lib/languages/typescript';\nimport js from 'highlight.js/lib/languages/javascript';\nimport MetaInfo from '../components/MetaInfo';\nimport Content from '../components/Content';\nimport SocialShare from '../components/SocialShare';\nimport Image from '../components/Image';\nimport PWithIframe from '../components/PWithIframe';\nimport css from './post.module.css';\nimport './highlightjs.css';\n\nconst schema = Object.assign({}, githubSchema, {\n  attributes: Object.assign({}, githubSchema.attributes, {\n    code: [...(githubSchema.attributes.code || []), 'className']\n  })\n});\n\nclass Post extends Component {\n  static propTypes = {\n    year: PropTypes.number.isRequired,\n    month: PropTypes.number.isRequired,\n    day: PropTypes.number.isRequired,\n    slug: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n    content: PropTypes.string.isRequired,\n    readingTime: PropTypes.string.isRequired\n  };\n\n  static async getInitialProps(context) {\n    const { id, year, month, day } = context.query;\n    const date = moment(new Date(year, month - 1, day)).format('YYYY-MM-DD');\n    const post = await import(`../_posts/${date}-${id}.md`);\n    const document = matter(post.default);\n\n    return {\n      slug: id,\n      year: parseInt(year, 10),\n      month: parseInt(month, 10),\n      day: parseInt(day, 10),\n      content: document.content,\n      readingTime: getReadingTime(document.content).text,\n      title: document.data.title\n    };\n  }\n\n  render() {\n    const { content, title, year, month, day, readingTime, slug } = this.props;\n    const url = `https://magarcia.github.io/${year}/${month}/${day}/${slug}`;\n    return (\n      <>\n        <article className={css.article}>\n          <h1 className={css.contentTitle}>{title}</h1>\n          <MetaInfo {...{ year, month, day, readingTime }} />\n          <Content>\n            {\n              remark()\n                .use(reactRender, {\n                  sanitize: schema,\n                  remarkReactComponents: {\n                    code: lowlight({\n                      ts,\n                      js\n                    }),\n                    img: Image,\n                    p: PWithIframe\n                  }\n                })\n                .processSync(content).contents\n            }\n          </Content>\n        </article>\n        <SocialShare title={title} url={url} />\n      </>\n    );\n  }\n}\n\nexport default withRouter(Post);\n"],"mappings":";;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AADA;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AADA;AADA;AACA;AAKA;;;;;;;;;;;;;AA4BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AANA;AAFA;AAeA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;;;AA9CA;;;;;;;AACA;AACA;;AACA;AACA;;AADA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AACA;;;;;;;;;;;;;;;;;;AAlBA;AACA;AADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AACA;AA0DA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}