<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8" class="next-head"/><title class="next-head">magarcia</title><link rel="preload" href="/_next/static/aunAxTRvvzIKPQFR4ha5a/pages/post.js" as="script"/><link rel="preload" href="/_next/static/aunAxTRvvzIKPQFR4ha5a/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/aunAxTRvvzIKPQFR4ha5a/pages/_error.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-339c4f204a0406fb0791.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.96d3ccb2a99a60acf2a6.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.7d2dab4d8b7bac832de9.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-377bc1082149a53398fc.js" as="script"/><link rel="stylesheet" href="/_next/static/css/styles.c74840ca.chunk.css"/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=contain"/><link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i|Open+Sans:600|Playfair+Display:700" rel="stylesheet"/></head><body><div id="__next"><div class="components-___bar___7MxMj"><div class="components-___content___HrAga"><div class="components-___block___9skge"><a href="/"><h1 class="components-___title___1CN1y">magarcia</h1></a></div><div class="components-___block___9skge components-___right___1Sapt"><img alt="Gravatar for newluxfero@gmail.com" src="//www.gravatar.com/avatar/eaf59739836cc2f138c202d05256323d?d=retro&amp;r=g&amp;s=48" srcSet="//www.gravatar.com/avatar/eaf59739836cc2f138c202d05256323d?d=retro&amp;r=g&amp;s=96 2x" height="48" width="48" class="react-gravatar components-___avatar___1cxk3"/></div></div></div><section class="components-___body___1FoQ0"><div class="components-___inner___J7ZR7"><article class="pages-___article___1w_PM"><h1 class="pages-___contentTitle___2LOeo">$watch with Angular 2</h1><div class="components-___postMetaInline___1GBEP "><time dateTime="1467583200000">Jul 4, 2016</time><span class="components-___middotDivider___yt1kO"></span><span class="components-___readingTime___1s3hq" title="2 min read"></span></div><div class="components-___postContent___3mFwM"><p>In my <a href="/2016/07/03/events-in-angular2">previous post</a>, I was talking about how to implement events from Angular 1
in Angular 2. But in the snippet of code that I use as example we can find
another thing that not exist in Angular 2: <code class="hljs" style="display:inline">$watch</code>.</p>
<p>I start defining the problem. We can have a directive or Angular 1 component
like that:</p>
<pre><code class="hljs js" style="display:inline"><span class="hljs-keyword">var</span> <span class="hljs-built_in">module</span> = angular.module(<span class="hljs-string">&quot;myApp&quot;</span>);

<span class="hljs-built_in">module</span>.directive(<span class="hljs-string">&#x27;exampleDirective&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">template</span>: <span class="hljs-string">&#x27;&lt;div&gt;{{internalVar}}&lt;/div&gt;&#x27;</span>,
    <span class="hljs-attr">scope</span>: {
      <span class="hljs-attr">externalVar</span>: <span class="hljs-string">&quot;=&quot;</span>
    },
    <span class="hljs-attr">controller</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element</span>) </span>{
      scope.$watch(<span class="hljs-string">&#x27;externalVar&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">newVal, oldVal</span>) </span>{
        <span class="hljs-keyword">if</span> (newVal !== oldVal) {
          scope.internalVar = newVal;
        }
      });
    }
});
</code></pre>
<p>If we want to migrate this code to Angular 2 we find a trouble: the new Angular
don&#x27;t have <code class="hljs" style="display:inline">scope</code>, so it don&#x27;t have <code class="hljs" style="display:inline">$watch</code>. How we can watch a directive
attribute? The solution is the <strong>set</strong> syntax from ES6.</p>
<blockquote>
<p>The <strong>set</strong> syntax binds an object property to a function to be called when
there is an attempt to set that property.</p>
</blockquote>
<p><em>From <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Functions/set">MDN</a></em></p>
<p>So we can bind the input for a component to a function that do the same as the
<code class="hljs" style="display:inline">$watch</code> function.</p>
<pre><code class="hljs ts" style="display:inline"><span class="hljs-keyword">import</span> { Component, Input } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/core&#x27;</span>;

<span class="hljs-meta">@Component</span>({
  selector: <span class="hljs-string">&#x27;example-component&#x27;</span>
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> ExampleComponent {
  <span class="hljs-keyword">public</span> internalVal = <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"></span>) {}

  <span class="hljs-meta">@Input</span>(<span class="hljs-string">&#x27;externalVal&#x27;</span>)
  <span class="hljs-keyword">set</span> updateInternalVal(externalVal) {
    <span class="hljs-keyword">this</span>.internalVal = externalVal;
  }
}
</code></pre></div></article><aside class="components-___aside___LIh0t  components-___ssrAnimation___1cKKV"><a title="Share on Twitter" aria-label="Share on Twitter" target="_blank" rel="noopener noreferrer" href="https://twitter.com/intent/tweet?text=$watch with Angular 2&amp;url=https://magarcia.github.io/2016/7/4/watch-with-angular2&amp;via=martinprins"><svg width="20" height="20" viewBox="0 0 24 24"><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"></path></svg></a><a title="Share on Facebook" aria-label="Share on Facebook" target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/sharer/sharer.php?u=https://magarcia.github.io/2016/7/4/watch-with-angular2"><svg width="20" height="20" viewBox="0 0 24 24"><path d="M22.676 0H1.324C.593 0 0 .593 0 1.324v21.352C0 23.408.593 24 1.324 24h11.494v-9.294H9.689v-3.621h3.129V8.41c0-3.099 1.894-4.785 4.659-4.785 1.325 0 2.464.097 2.796.141v3.24h-1.921c-1.5 0-1.792.721-1.792 1.771v2.311h3.584l-.465 3.63H16.56V24h6.115c.733 0 1.325-.592 1.325-1.324V1.324C24 .593 23.408 0 22.676 0"></path></svg></a><a title="Share on LinkedIn" aria-label="Share on LinkedIn" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://magarcia.github.io/2016/7/4/watch-with-angular2&amp;title=$watch with Angular 2&amp;source=https%3A//www.linkedin.com/in/martingarciamonterde/"><svg width="20" height="20" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a></aside></div></section><div class="components-___footer___229iY"><div class="components-___footerContent___3zrKr"><span>Made with<!-- --> <span role="img" aria-label="love">❤️</span> <!-- -->from Barcelona</span></div></div></div><script>__NEXT_DATA__ = {"props":{"pageProps":{"slug":"watch-with-angular2","year":2016,"month":7,"day":4,"content":"\nIn my [previous post](/2016/07/03/events-in-angular2), I was talking about how to implement events from Angular 1\nin Angular 2. But in the snippet of code that I use as example we can find\nanother thing that not exist in Angular 2: `$watch`.\n\nI start defining the problem. We can have a directive or Angular 1 component\nlike that:\n\n```js\nvar module = angular.module(\"myApp\");\n\nmodule.directive('exampleDirective', function () {\n  return {\n    template: '\u003cdiv\u003e{{internalVar}}\u003c/div\u003e',\n    scope: {\n      externalVar: \"=\"\n    },\n    controller: function(scope, element) {\n      scope.$watch('externalVar', function(newVal, oldVal) {\n        if (newVal !== oldVal) {\n          scope.internalVar = newVal;\n        }\n      });\n    }\n});\n```\n\nIf we want to migrate this code to Angular 2 we find a trouble: the new Angular\ndon't have `scope`, so it don't have `$watch`. How we can watch a directive\nattribute? The solution is the **set** syntax from ES6.\n\n\u003e The **set** syntax binds an object property to a function to be called when\n\u003e there is an attempt to set that property.\n\n_From [MDN](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Functions/set)_\n\nSo we can bind the input for a component to a function that do the same as the\n`$watch` function.\n\n```ts\nimport { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'example-component'\n})\nexport class ExampleComponent {\n  public internalVal = null;\n\n  constructor() {}\n\n  @Input('externalVal')\n  set updateInternalVal(externalVal) {\n    this.internalVal = externalVal;\n  }\n}\n```\n","readingTime":"2 min read","title":"$watch with Angular 2"}},"page":"/post","query":{"year":"2016","month":"07","day":"04","id":"watch-with-angular2"},"buildId":"aunAxTRvvzIKPQFR4ha5a","nextExport":true};__NEXT_LOADED_PAGES__=[];__NEXT_REGISTER_PAGE=function(r,f){__NEXT_LOADED_PAGES__.push([r, f])}</script><script async="" id="__NEXT_PAGE__/post" src="/_next/static/aunAxTRvvzIKPQFR4ha5a/pages/post.js"></script><script async="" id="__NEXT_PAGE__/_app" src="/_next/static/aunAxTRvvzIKPQFR4ha5a/pages/_app.js"></script><script async="" id="__NEXT_PAGE__/_error" src="/_next/static/aunAxTRvvzIKPQFR4ha5a/pages/_error.js"></script><script src="/_next/static/runtime/webpack-339c4f204a0406fb0791.js" async=""></script><script src="/_next/static/chunks/commons.96d3ccb2a99a60acf2a6.js" async=""></script><script src="/_next/static/chunks/styles.7d2dab4d8b7bac832de9.js" async=""></script><script src="/_next/static/runtime/main-377bc1082149a53398fc.js" async=""></script></body></html>