<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/component---src-templates-blog-post-js.5dcf58bf6f0ff11f6d41.css">@font-face{font-display:swap;font-family:Inter UI;font-style:normal;font-weight:100;src:url(//rsms.me/inter/font-files/Inter-UI-Thin.woff2?v=3.2) format("woff2"),url(//rsms.me/inter/font-files/Inter-UI-Thin.woff?v=3.2) format("woff")}@font-face{font-display:swap;font-family:Inter UI;font-style:italic;font-weight:100;src:url(//rsms.me/inter/font-files/Inter-UI-ThinItalic.woff2?v=3.2) format("woff2"),url(//rsms.me/inter/font-files/Inter-UI-ThinItalic.woff?v=3.2) format("woff")}@font-face{font-display:swap;font-family:Inter UI;font-style:normal;font-weight:200;src:url(//rsms.me/inter/font-files/Inter-UI-ExtraLight.woff2?v=3.2) format("woff2"),url(//rsms.me/inter/font-files/Inter-UI-ExtraLight.woff?v=3.2) format("woff")}@font-face{font-display:swap;font-family:Inter UI;font-style:italic;font-weight:200;src:url(//rsms.me/inter/font-files/Inter-UI-ExtraLightItalic.woff2?v=3.2) format("woff2"),url(//rsms.me/inter/font-files/Inter-UI-ExtraLightItalic.woff?v=3.2) format("woff")}@font-face{font-display:swap;font-family:Inter UI;font-style:normal;font-weight:300;src:url(//rsms.me/inter/font-files/Inter-UI-Light.woff2?v=3.2) format("woff2"),url(//rsms.me/inter/font-files/Inter-UI-Light.woff?v=3.2) format("woff")}@font-face{font-display:swap;font-family:Inter UI;font-style:italic;font-weight:300;src:url(//rsms.me/inter/font-files/Inter-UI-LightItalic.woff2?v=3.2) format("woff2"),url(//rsms.me/inter/font-files/Inter-UI-LightItalic.woff?v=3.2) format("woff")}@font-face{font-display:swap;font-family:Inter UI;font-style:normal;font-weight:400;src:url(//rsms.me/inter/font-files/Inter-UI-Regular.woff2?v=3.2) format("woff2"),url(//rsms.me/inter/font-files/Inter-UI-Regular.woff?v=3.2) format("woff")}@font-face{font-display:swap;font-family:Inter UI;font-style:italic;font-weight:400;src:url(//rsms.me/inter/font-files/Inter-UI-Italic.woff2?v=3.2) format("woff2"),url(//rsms.me/inter/font-files/Inter-UI-Italic.woff?v=3.2) format("woff")}@font-face{font-display:swap;font-family:Inter UI;font-style:normal;font-weight:500;src:url(//rsms.me/inter/font-files/Inter-UI-Medium.woff2?v=3.2) format("woff2"),url(//rsms.me/inter/font-files/Inter-UI-Medium.woff?v=3.2) format("woff")}@font-face{font-display:swap;font-family:Inter UI;font-style:italic;font-weight:500;src:url(//rsms.me/inter/font-files/Inter-UI-MediumItalic.woff2?v=3.2) format("woff2"),url(//rsms.me/inter/font-files/Inter-UI-MediumItalic.woff?v=3.2) format("woff")}@font-face{font-display:swap;font-family:Inter UI;font-style:normal;font-weight:600;src:url(//rsms.me/inter/font-files/Inter-UI-SemiBold.woff2?v=3.2) format("woff2"),url(//rsms.me/inter/font-files/Inter-UI-SemiBold.woff?v=3.2) format("woff")}@font-face{font-display:swap;font-family:Inter UI;font-style:italic;font-weight:600;src:url(//rsms.me/inter/font-files/Inter-UI-SemiBoldItalic.woff2?v=3.2) format("woff2"),url(//rsms.me/inter/font-files/Inter-UI-SemiBoldItalic.woff?v=3.2) format("woff")}@font-face{font-display:swap;font-family:Inter UI;font-style:normal;font-weight:700;src:url(//rsms.me/inter/font-files/Inter-UI-Bold.woff2?v=3.2) format("woff2"),url(//rsms.me/inter/font-files/Inter-UI-Bold.woff?v=3.2) format("woff")}@font-face{font-display:swap;font-family:Inter UI;font-style:italic;font-weight:700;src:url(//rsms.me/inter/font-files/Inter-UI-BoldItalic.woff2?v=3.2) format("woff2"),url(//rsms.me/inter/font-files/Inter-UI-BoldItalic.woff?v=3.2) format("woff")}@font-face{font-display:swap;font-family:Inter UI;font-style:normal;font-weight:800;src:url(//rsms.me/inter/font-files/Inter-UI-ExtraBold.woff2?v=3.2) format("woff2"),url(//rsms.me/inter/font-files/Inter-UI-ExtraBold.woff?v=3.2) format("woff")}@font-face{font-display:swap;font-family:Inter UI;font-style:italic;font-weight:800;src:url(//rsms.me/inter/font-files/Inter-UI-ExtraBoldItalic.woff2?v=3.2) format("woff2"),url(//rsms.me/inter/font-files/Inter-UI-ExtraBoldItalic.woff?v=3.2) format("woff")}@font-face{font-display:swap;font-family:Inter UI;font-style:normal;font-weight:900;src:url(//rsms.me/inter/font-files/Inter-UI-Black.woff2?v=3.2) format("woff2"),url(//rsms.me/inter/font-files/Inter-UI-Black.woff?v=3.2) format("woff")}@font-face{font-display:swap;font-family:Inter UI;font-style:italic;font-weight:900;src:url(//rsms.me/inter/font-files/Inter-UI-BlackItalic.woff2?v=3.2) format("woff2"),url(//rsms.me/inter/font-files/Inter-UI-BlackItalic.woff?v=3.2) format("woff")}@font-face{font-display:swap;font-family:Inter UI var;font-weight:100 900;font-style:oblique 0deg 10deg;src:url(//rsms.me/inter/font-files/Inter-UI.var.woff2?v=3.2) format("woff2-variations"),url(//rsms.me/inter/font-files/Inter-UI.var.woff2?v=3.2) format("woff2")}@font-face{font-display:swap;font-family:Inter UI var alt;font-weight:100 900;font-style:normal;font-named-instance:"Regular";src:url(//rsms.me/inter/font-files/Inter-UI-upright.var.woff2?v=3.2) format("woff2 supports variations(gvar)"),url(//rsms.me/inter/font-files/Inter-UI-upright.var.woff2?v=3.2) format("woff2-variations"),url(//rsms.me/inter/font-files/Inter-UI-upright.var.woff2?v=3.2) format("woff2")}@font-face{font-display:swap;font-family:Inter UI var alt;font-weight:100 900;font-style:italic;font-named-instance:"Italic";src:url(//rsms.me/inter/font-files/Inter-UI-italic.var.woff2?v=3.2) format("woff2 supports variations(gvar)"),url(//rsms.me/inter/font-files/Inter-UI-italic.var.woff2?v=3.2) format("woff2-variations"),url(//rsms.me/inter/font-files/Inter-UI-italic.var.woff2?v=3.2) format("woff2")}@-ms-viewport{width:device-width}@-o-viewport{width:device-width}@viewport{width:device-width}*{margin:0;padding:0;font-family:inherit}body{background:#fff;color:#111;font-family:Inter UI,-system-ui,system-ui,sans-serif;font-size:16px;line-height:1.5;width:100%;max-width:45rem;margin:0 auto;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;-webkit-overflow-scrolling:touch;scroll-behavior:smooth;-ms-font-feature-settings:"calt" 1,"kern" 1,"liga" 1;-o-font-feature-settings:"calt" 1,"kern" 1,"liga" 1;-webkit-font-feature-settings:"calt" 1,"kern" 1,"liga" 1;font-feature-settings:"calt" 1,"kern" 1,"liga" 1}@supports (font-variation-settings:normal){body{font-family:Inter UI var,-system-ui,system-ui,sans-serif}html.vf-alt body{font-family:Inter UI var alt,-system-ui,system-ui,sans-serif}}blockquote,hr,object,ol,p,pre,ul{margin:1rem 0}code,pre,tt{font-family:SFMono-Regular,Menlo,Liberation Mono,Consolas,Courier,monospace}img{vertical-align:bottom}hr,img{border:none}hr{height:1px;background-color:#ddd}b,strong{font-weight:600}article{margin-bottom:4rem}h1,h2,h3,h4,h5,h6{font-weight:500;color:#010101;margin:1.618rem 0 .7rem;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1{font-size:3rem;font-weight:700;letter-spacing:-.05rem;line-height:1.1;margin-left:-2px}@media only screen and (min-device-width:480px){h1{font-size:4rem}}h2{font-size:2rem;letter-spacing:-.01rem;margin-left:-.5px}h2,h3{font-weight:700;line-height:1.35}h3{font-size:1.8rem}h3,h4{letter-spacing:0}h4{font-size:1.5rem;font-weight:500;line-height:1.35}h5,h6{font-size:1.2rem;margin:1rem 0 -.2rem;letter-spacing:.01rem}a[href]:not(.anchor):not(.gatsby-resp-image-link){text-decoration:none;background-repeat:repeat-x;background-image:linear-gradient(90deg,rgba(0,0,0,.84) 100%,transparent 0);background-image:linear-gradient(90deg,currentColor 100%,currentColor 0);background-size:1px 1px;background-position:0 1.05em;background-position:0 calc(1em + 1px);color:inherit}h1>a,h2>a,h3>a,h4>a,h5>a,h6>a{background:transparent!important}::selection,mark{background:#faf014;text-shadow:none;padding:0 3px}.footer,.header,main{margin:0 2rem}.header{display:flex;justify-content:space-between;height:100px;cursor:default}.header h1{background:#faf014;font-size:3rem;padding:0 1rem;height:3.8rem;margin:0 -1rem}.header h1 a::selection{background:transparent}.header h3{font-size:2rem;margin:0}.footer,.header{max-width:50rem;margin:2rem}.footer{display:flex;justify-content:space-between}.footer,nav{margin-top:4.375rem;padding-top:1.75rem}nav ul{display:flex;justify-content:space-between;padding:0;list-style:none;flex-wrap:wrap}.info{color:rgba(0,0,0,.55)}.info::selection,.info ::selection{background:rgba(250,240,20,.2)}.post-list header h3{margin-bottom:0}.aside{position:fixed;top:150px;margin-left:-100px;visibility:hidden;opacity:0;transition:visibility 0s linear .3s,opacity .3s 0s}.aside.visible{visibility:visible;opacity:1;transition:visibility 0s linear 0s,opacity .3s 0s}.aside a{font-size:17px;color:rgba(0,0,0,.84);opacity:.65;display:block;position:relative;background:transparent;text-decoration:none;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none;box-sizing:border-box;margin:10px 3px;height:24px;background:transparent!important}.aside a:hover{opacity:1}.ssrAnimation{-webkit-animation-delay:2s;animation-delay:2s;-webkit-animation-duration:.3s;animation-duration:.3s;-webkit-animation-name:toggle;animation-name:toggle;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes toggle{0%{visibility:hidden;opacity:0}to{visibility:visible;opacity:1}}@keyframes toggle{0%{visibility:hidden;opacity:0}to{visibility:visible;opacity:1}}code[class*=language-],pre[class*=language-]{color:#333;background:none;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;-webkit-font-feature-settings:normal;font-feature-settings:normal;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;margin-bottom:0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#dfe2f1}:not(pre)>code[class*=language-]{border-radius:1px;background:var(--inlineCode-bg);color:var(--inlineCode-text);padding:.15rem .2rem .05rem;white-space:normal;background:rgba(0,0,0,.05);font-size:1rem}pre[class*=language-]{padding:1rem;margin:.5rem 0;overflow:auto}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#898ea4}.token.punctuation{color:#5e6687}.token.namespace{opacity:.7}.token.boolean,.token.number,.token.operator{color:#c76b29}.token.property{color:#c08b30}.token.tag{color:#3d8fd1}.token.string{color:#22a2c9}.token.selector{color:#6679cc}.token.attr-name{color:#c76b29}.language-css .token.string,.style .token.string,.token.entity,.token.url{color:#22a2c9}.token.attr-value,.token.control,.token.directive,.token.keyword,.token.unit{color:#ac9739}.token.atrule,.token.regex,.token.statement{color:#22a2c9}.token.placeholder,.token.variable{color:#3d8fd1}.token.deleted{text-decoration:line-through}.token.inserted{border-bottom:1px dotted #202746;text-decoration:none}.token.italic{font-style:italic}.token.bold,.token.important{font-weight:700}.token.important{color:#c94922}.token.entity{cursor:help}pre>code.highlight{outline:.4em solid #c94922;outline-offset:.4em}.line-numbers .line-numbers-rows{border-right-color:#dfe2f1}.line-numbers-rows>span:before{color:#979db4}.line-highlight{background:rgba(107,115,148,.2);background:linear-gradient(90deg,rgba(107,115,148,.2) 70%,rgba(107,115,148,0))}pre[data-line]{padding:1em 0 1em 3em;position:relative}.gatsby-highlight-code-line{background-color:#022a4b;display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:.75em;border-left:.25em solid #ffa7c4}.gatsby-highlight{margin-bottom:1.75rem;font-size:16px;border-radius:1px;background:rgba(0,0,0,.05);-webkit-overflow-scrolling:touch;overflow:auto}.gatsby-highlight pre[class*=language-]{float:left;min-width:100%}</style><meta name="generator" content="Gatsby 2.0.98"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" title="magarcia Blog RSS Feed" href="/rss.xml"/><link rel="shortcut icon" href="/icons/icon-48x48.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#faf014"/><title data-react-helmet="true">Moving big parts to Angular 2 — magarcia</title><meta data-react-helmet="true" name="description" content="Personal blog by Martin Garcia."/><meta data-react-helmet="true" property="og:url" content="https://magarcia.io/moving-big-parts-to-angular-2/"/><meta data-react-helmet="true" property="og:title" content="Moving big parts to Angular 2"/><meta data-react-helmet="true" name="og:description" content="Personal blog by Martin Garcia."/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@martinprins"/><meta data-react-helmet="true" name="twitter:title" content="Moving big parts to Angular 2"/><meta data-react-helmet="true" name="twitter:description" content="Personal blog by Martin Garcia."/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-64ad2b4d3bffb7d2b51c.js"/><link as="script" rel="preload" href="/0-79f3b6d3bbaf0f030044.js"/><link as="script" rel="preload" href="/app-44e083055daca69579cf.js"/><link as="script" rel="preload" href="/webpack-runtime-510fead3823cd2e26b43.js"/><link as="fetch" rel="preload" href="/static/d/277/path---2016-06-12-moving-big-parts-to-angular-2-3-e-4-e65-EtkulgJStfyEZG6zrA9HFDuTdI.json" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><header class="header"><h3><a href="/">magarcia</a></h3></header><aside class="aside  ssrAnimation"><a title="Share on Twitter" aria-label="Share on Twitter" target="_blank" rel="noopener noreferrer" href="https://twitter.com/intent/tweet?text=Moving big parts to Angular 2&amp;url=https://magarcia.github.io/2016/06/12/moving-big-parts-to-angular-2/&amp;via=martinprins"><img src="data:image/svg+xml;base64,PHN2ZyByb2xlPSJpbWciIHZpZXdCb3g9IjAgMCAyNCAyNCIgCiAgICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgPHRpdGxlPlR3aXR0ZXIgaWNvbjwvdGl0bGU+CiAgICA8cGF0aCBkPSJNMjMuOTU0IDQuNTY5Yy0uODg1LjM4OS0xLjgzLjY1NC0yLjgyNS43NzUgMS4wMTQtLjYxMSAxLjc5NC0xLjU3NCAyLjE2My0yLjcyMy0uOTUxLjU1NS0yLjAwNS45NTktMy4xMjcgMS4xODQtLjg5Ni0uOTU5LTIuMTczLTEuNTU5LTMuNTkxLTEuNTU5LTIuNzE3IDAtNC45MiAyLjIwMy00LjkyIDQuOTE3IDAgLjM5LjA0NS43NjUuMTI3IDEuMTI0QzcuNjkxIDguMDk0IDQuMDY2IDYuMTMgMS42NCAzLjE2MWMtLjQyNy43MjItLjY2NiAxLjU2MS0uNjY2IDIuNDc1IDAgMS43MS44NyAzLjIxMyAyLjE4OCA0LjA5Ni0uODA3LS4wMjYtMS41NjYtLjI0OC0yLjIyOC0uNjE2di4wNjFjMCAyLjM4NSAxLjY5MyA0LjM3NCAzLjk0NiA0LjgyNy0uNDEzLjExMS0uODQ5LjE3MS0xLjI5Ni4xNzEtLjMxNCAwLS42MTUtLjAzLS45MTYtLjA4Ni42MzEgMS45NTMgMi40NDUgMy4zNzcgNC42MDQgMy40MTctMS42OCAxLjMxOS0zLjgwOSAyLjEwNS02LjEwMiAyLjEwNS0uMzkgMC0uNzc5LS4wMjMtMS4xNy0uMDY3IDIuMTg5IDEuMzk0IDQuNzY4IDIuMjA5IDcuNTU3IDIuMjA5IDkuMDU0IDAgMTMuOTk5LTcuNDk2IDEzLjk5OS0xMy45ODYgMC0uMjA5IDAtLjQyLS4wMTUtLjYzLjk2MS0uNjg5IDEuOC0xLjU2IDIuNDYtMi41NDhsLS4wNDctLjAyeiIvPgo8L3N2Zz4K" width="24" height="24" alt="Twitter"/></a><a title="Share on Facebook" aria-label="Share on Facebook" target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/sharer/sharer.php?u=https://magarcia.github.io/2016/06/12/moving-big-parts-to-angular-2/"><img src="data:image/svg+xml;base64,PHN2ZyByb2xlPSJpbWciIHZpZXdCb3g9IjAgMCAyNCAyNCIgCiAgICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgPHRpdGxlPkZhY2Vib29rIGljb248L3RpdGxlPgogICAgPHBhdGggZD0iTTIyLjY3NiAwSDEuMzI0Qy41OTMgMCAwIC41OTMgMCAxLjMyNHYyMS4zNTJDMCAyMy40MDguNTkzIDI0IDEuMzI0IDI0aDExLjQ5NHYtOS4yOTRIOS42ODl2LTMuNjIxaDMuMTI5VjguNDFjMC0zLjA5OSAxLjg5NC00Ljc4NSA0LjY1OS00Ljc4NSAxLjMyNSAwIDIuNDY0LjA5NyAyLjc5Ni4xNDF2My4yNGgtMS45MjFjLTEuNSAwLTEuNzkyLjcyMS0xLjc5MiAxLjc3MXYyLjMxMWgzLjU4NGwtLjQ2NSAzLjYzSDE2LjU2VjI0aDYuMTE1Yy43MzMgMCAxLjMyNS0uNTkyIDEuMzI1LTEuMzI0VjEuMzI0QzI0IC41OTMgMjMuNDA4IDAgMjIuNjc2IDAiLz4KPC9zdmc+Cg==" width="24" height="24" alt="Facebook"/></a><a title="Share on LinkedIn" aria-label="Share on LinkedIn" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://magarcia.github.io/2016/06/12/moving-big-parts-to-angular-2/&amp;title=Moving big parts to Angular 2&amp;source=https%3A//www.linkedin.com/in/martingarciamonterde/"><img src="data:image/svg+xml;base64,PHN2ZyByb2xlPSJpbWciIHZpZXdCb3g9IjAgMCAyNCAyNCIgCiAgICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgPHRpdGxlPkxpbmtlZEluIGljb248L3RpdGxlPgogICAgPHBhdGggZD0iTTIwLjQ0NyAyMC40NTJoLTMuNTU0di01LjU2OWMwLTEuMzI4LS4wMjctMy4wMzctMS44NTItMy4wMzctMS44NTMgMC0yLjEzNiAxLjQ0NS0yLjEzNiAyLjkzOXY1LjY2N0g5LjM1MVY5aDMuNDE0djEuNTYxaC4wNDZjLjQ3Ny0uOSAxLjYzNy0xLjg1IDMuMzctMS44NSAzLjYwMSAwIDQuMjY3IDIuMzcgNC4yNjcgNS40NTV2Ni4yODZ6TTUuMzM3IDcuNDMzYy0xLjE0NCAwLTIuMDYzLS45MjYtMi4wNjMtMi4wNjUgMC0xLjEzOC45Mi0yLjA2MyAyLjA2My0yLjA2MyAxLjE0IDAgMi4wNjQuOTI1IDIuMDY0IDIuMDYzIDAgMS4xMzktLjkyNSAyLjA2NS0yLjA2NCAyLjA2NXptMS43ODIgMTMuMDE5SDMuNTU1VjloMy41NjR2MTEuNDUyek0yMi4yMjUgMEgxLjc3MUMuNzkyIDAgMCAuNzc0IDAgMS43Mjl2MjAuNTQyQzAgMjMuMjI3Ljc5MiAyNCAxLjc3MSAyNGgyMC40NTFDMjMuMiAyNCAyNCAyMy4yMjcgMjQgMjIuMjcxVjEuNzI5QzI0IC43NzQgMjMuMiAwIDIyLjIyMiAwaC4wMDN6Ii8+Cjwvc3ZnPgo=" width="24" height="24" alt="LinkedIn"/></a></aside><main><header><h1>Moving big parts to Angular 2</h1><small class="info"><time dateTime="2016-06-12">June 12, 2016</time> <!-- -->‐ <!-- -->5 min read</small></header><div><p>In a previous post I explained how I convert Jangouts to a hybrid Angular 1+2
application. This approach, instead of a full migration, has two objectives. In
first place test that the functionalities are working correctly is more easy,
because it’s possible to run Jangouts and use it. And on the other hand, if I
can’t finish the migration, the application will be still usable allowing others
to continue the work. But I hope this last scenario won’t be real.</p>
<p>With the hybrid approach applied, this week I have been working on migrating some
components to Angular 2. I started migrating the Chat component, more complex
than the Footer previously migrated, but not enough to be frustrating in these
early stages.</p>
<h2 id="migrating-subcomponents"><a href="#migrating-subcomponents" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Migrating subcomponents</h2>
<p>The Chat component of Jangouts has three subcomponents, a part of the main
component:</p>
<ul>
<li><strong><code class="language-text">chat-message</code></strong>: That handles the render the message sent by the user.</li>
<li><strong><code class="language-text">log-entry</code></strong>: That handles the notifications sent by the system (like ”<em>The user
X has joined</em>).</li>
<li><strong><code class="language-text">chat-form</code></strong>: That handles the input of messages.</li>
</ul>
<p>These subcomponents are really simple, each one has a component class without
much code and a template. But the key of this migration has been that the styles
were moved from the main <code class="language-text">scss</code> file to independent files for each subcomponent.
This takes profit of <a href="https://angular.io/docs/ts/latest/guide/component-styles.html#!#view-encapsulation">Angular 2 View Encapsulation</a>,
ensuring that the styles will be only applied to the component.</p>
<p>During the <code class="language-text">chat-message</code> migration, I found trouble. A problem that comes
from the sue of <a href="https://github.com/ritz078/ng-embed">ngEmbed</a> library that
provides a directive to render the user messages. This directive allows users
to use emojis and embed links, images, videos, etc. But as expected the
library hasn’t support for Angular 2, so I tried to upgrade the directive with
the <a href="https://angular.io/docs/ts/latest/guide/upgrade.html#!#how-the-upgrade-adapter-works">Angular 2 Upgrade Adapter</a>
but I found a strange error.</p>
<p>After some investigation, I found that ngEmbed use a function as <code class="language-text">templateUrl</code>
attribute (which is allowed in Angular 1), but in the version of Angular 2 that
I’m currently using with the project, the upgrade adapter don’t support this
kind of <code class="language-text">templateUrl</code>. I saw in the master branch of Angular 2 that the code
has been updated to support this functionality, but now neither version
incorporates the change. So after discussing with my mentors, we decide to disable
this functionality in Jangouts and keep moving with the migration.</p>
<p>I wish to have time to reenable it in the future.</p>
<h2 id="differentiate-between-component-and-directive"><a href="#differentiate-between-component-and-directive" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Differentiate between component and directive</h2>
<p>Migrate the main component was more complex. The main component has the list of
all messages (user and system messages) in a view that auto scroll when a new
message arrives. In the old Jangouts, this was one directive that renders the
list of messages and controls the auto scroll. But Angular 2 is a different
paradigm. In Angular 2, the correct approach, a component always have a template
and never interacts with the DOM and a directive never have a template and can
interact with the DOM.</p>
<p>So this evidence that the main chat component would be migrated into two
different things:</p>
<ul>
<li>A <strong>component</strong> to render the list of messages.</li>
<li>A <strong>directive</strong> that auto scroll when it’s necessary.</li>
</ul>
<p>After the migration, we have the component that renders the list of messages and
inside it the directive that handles the auto scroll.</p>
<h2 id="putting-all-together"><a href="#putting-all-together" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Putting all together</h2>
<p>During the subcomponents migration, each one was downgraded to be Angular 1
compatible using the provided adapter by Angular 2 and manually tested with the
old version of the main component. When the main component was migrated, this
made that the code of the component was pure Angular 2 (without downgrade the
subcomponents) and the only thing to do to keep the compatibility with the rest
of the Angular 1 application was downgrade the main chat component.</p>
<h2 id="applying-the-correct-application-structure"><a href="#applying-the-correct-application-structure" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Applying the correct application structure</h2>
<p>The changes applied this week wasn’t only in the code, I also update the
application structure following the recommendations of the <a href="https://angular.io/styleguide#!#application-structure_">style guide</a>.
Previous to the migration the application has the following structure:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">src
└── app
    ├── adapter.ts
    ├── variables.scss
    ├── index.scss
    ├── vendor.scss
    ├── index.ts
    ├── components
    │   ├── chat
    │   │   ├── chat-form.directive.html
    │   │   ├── chat-form.directive.js
    │   │   ├── chat.directive.html
    │   │   ├── chat.directive.js
    │   │   ├── chat-message.directive.html
    │   │   ├── chat-message.directive.js
    │   │   ├── log-entry.directive.html
    │   │   └── log-entry.directive.html
    │   ├── footer
    │   │   ├── footer.directive.html
    │   │   └── footer.directive.js
    │   └── [...]
    └── [...]</code></pre></div>
<p>But after the changes this is the result:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">src
└── app
    ├── adapter.ts
    ├── variables.scss
    ├── index.scss
    ├── vendor.scss
    ├── index.ts
    ├── chat
    │   ├── index.ts
    │   ├── chat.component.html
    │   ├── chat.component.scss
    │   ├── chat.component.spec.ts
    │   ├── chat.component.ts
    │   ├── chat-form
    │   │   ├── chat-form.component.html
    │   │   ├── chat-form.component.spec.ts
    │   │   ├── chat-form.component.ts
    │   │   └── index.ts
    │   ├── chat-message
    │   │   ├── chat-message.component.html
    │   │   ├── chat-message.component.scss
    │   │   ├── chat-message.component.spec.ts
    │   │   ├── chat-message.component.ts
    │   │   └── index.ts
    │   ├── log-entry
    │   │   ├── index.ts
    │   │   ├── log-entry.component.html
    │   │   ├── log-entry.component.spec.ts
    │   │   └── log-entry.component.ts
    │   └── message-autoscroll.directive.ts
    ├── footer
    │   ├── footer.component.html
    │   ├── footer.component.scss
    │   ├── footer.component.spec.ts
    │   ├── footer.component.ts
    │   └── index.ts
    ├── components
    │   └──  [...] // This contains the not migrated code
    └── [...]</code></pre></div>
<h2 id="currently-working"><a href="#currently-working" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Currently working</h2>
<p>Currently I’m working on the migration of Feed component. This is one of the
most complex components in the application because it has a lot of services that
handles the video/audio streams.</p>
<p>Actually, I’ve moved all the services and factories to Angular 2 services, but I
still not enabled the support for work with the Angular 1 code. The reason? I
want to make a full test suite that tests these services deeply before to continue
with the migration of the rest of the component and make the integration with
the rest of the application.</p></div><footer><p><a href="https://mobile.twitter.com/search?q=https%3A%2F%2Fmagarcia.github.io%2F2016%2F06%2F12%2Fmoving-big-parts-to-angular-2%2F" target="_blank" rel="noopener noreferrer">Discuss on Twitter</a> <!-- -->‐<!-- --> <a href="https://github.com/magarcia/blog/edit/master/src/pages/moving-big-parts-to-angular-2//index.md" target="_blank" rel="noopener noreferrer">Edit on GitHub</a></p></footer><nav><ul><li><a rel="prev" href="/2016/06/05/component-migration-started/">← <!-- -->Components migration started</a></li><li><a rel="next" href="/2016/06/26/angularbeers-with-misko-hevery/">AngularBeers with Miško Hevery<!-- --> →</a></li></ul></nav></main></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"2016-06-12-moving-big-parts-to-angular-2-3e4","path":"/2016/06/12/moving-big-parts-to-angular-2/"};window.dataPath="277/path---2016-06-12-moving-big-parts-to-angular-2-3-e-4-e65-EtkulgJStfyEZG6zrA9HFDuTdI";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-44e083055daca69579cf.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js.5dcf58bf6f0ff11f6d41.css","/component---src-templates-blog-post-js-64ad2b4d3bffb7d2b51c.js"],"component---src-pages-404-js":["/component---src-pages-404-js.2d1f7a0b86d1def98c97.css","/component---src-pages-404-js-b776a907baa3f0da4ea5.js"],"component---src-pages-index-js":["/component---src-pages-index-js.a2bd21c601be63f2d10a.css","/component---src-pages-index-js-36b5d1f6d51e39eef8f4.js"],"pages-manifest":["/pages-manifest-4e79abf8cc4c31b842b1.js"]};/*]]>*/</script><script src="/webpack-runtime-510fead3823cd2e26b43.js" async=""></script><script src="/app-44e083055daca69579cf.js" async=""></script><script src="/0-79f3b6d3bbaf0f030044.js" async=""></script><script src="/component---src-templates-blog-post-js-64ad2b4d3bffb7d2b51c.js" async=""></script></body></html>