{"data":{"site":{"siteMetadata":{"title":"magarcia","author":"Martin Garcia"}},"markdownRemark":{"id":"7a4f3457-f2e0-57bd-abad-d94fc8a3954f","html":"<p>Another week finished. This past week I could not do as much as I would have\nliked. I still at exam time, so I had to spend much of the time studying. But\neven so, there has been significant progress with regard to the project. We\nhave four important points:</p>\n<ol>\n<li>Fixed the build process for production.</li>\n<li>Added test runner.</li>\n<li>Migrated the first component to Angular 2.</li>\n<li>Added the first test for a migrated component.</li>\n</ol>\n<h2 id=\"fixing-the-build-process\"><a href=\"#fixing-the-build-process\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fixing the build process</h2>\n<p>Last week we had the development environment ready and also, presumably, the\nenvironment to distribute builds. But throughout the week, I noticed that with\nthe distributed build, Jangouts have issues with grid elements inside the video chat\nroom. After a while trying different configurations for Webpack, I found that\nthe issues were mainly related to the uglify process.</p>\n<p>The issue was related to the grid layout system of the video room, which is\nimplemented using <a href=\"http://manifestwebdesign.github.io/angular-gridster/\">angular-gridster</a>.\nSo, the problem can come form angular-gridster style or the JavaScript module.\nFirst of all I tried to import directly the CSS of the library without load it\nwith Webpack. This didn’t solve anything. Finally, I found that instead of including\nthe minified version of the library in <code class=\"language-text\">vendors.ts</code> file, I should use the source\nversion.</p>\n<p>This is a little weird, source and minified version should work in the same way.\nRegardless of this, using the source version fix the issue and this will not be\na problem because Webpack minify all the code, including <code class=\"language-text\">vendor.ts</code>.</p>\n<h2 id=\"adding-test-runner\"><a href=\"#adding-test-runner\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding test runner</h2>\n<p>This was easier than I expected. I use the awesome project\n<a href=\"https://github.com/AngularClass/angular2-webpack-starter\">angular2-webpack-starter</a>\nfrom <a href=\"https://angularclass.com/\">@AngularClass</a> as an inspiration source for\nimplement the test runner in Jangouts. I get the files <code class=\"language-text\">webpack.test.js</code> and\n<code class=\"language-text\">karma.conf.js</code> and, after some small changes, all worked perfectly. This is one\nof the best things of open source community: Don’t Repeat Yourself.</p>\n<h2 id=\"migrating-the-first-component\"><a href=\"#migrating-the-first-component\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Migrating the first component</h2>\n<p>I was waiting for this moment since I sent my proposal to GSoC. I started with\nthe migration of a simple component, probably the simplest component of whole\nJangouts, the footer. The footer in Jangouts only shows a link to\n<a href=\"https://www.suse.com/\">SUSE</a> and the version of Jangouts.</p>\n<p>In the old Jangouts (I will start to differentiate between pre and post-migration\nprocess) the footer component was composed by a simple Angular 1 directive with\na template and a <a href=\"http://jade-lang.com/\"><code class=\"language-text\">jade</code></a> template, that was rendered by\ngulp adding the current version.</p>\n<p>The new footer component is equally simple. It’s a <a href=\"https://github.com/magarcia/jangouts/blob/5db2d9de547d6d56aaed90c633b5d98ce64f6219/src/app/components/footer/jh-footer.directive.ts\">TypeScript file</a>\n(a component definition with an empty class) and an <a href=\"https://github.com/magarcia/jangouts/blob/5db2d9de547d6d56aaed90c633b5d98ce64f6219/src/app/components/footer/jh-footer.html\">Angular 2 template</a>.\nBut has a difference with the previous version, neither gulp or any other thing\nmodifies the template for add the version. Instead, the previous solution, now\nWebpack with the <a href=\"https://webpack.github.io/docs/list-of-plugins.html#defineplugin\">DefinePlugin</a>\nadd the version as a global constant during the build process, reading the\n<code class=\"language-text\">package.json</code>.</p>\n<p>This has a couple of benefits. First, the footer is now a pure Angular component\nand, on the other hand, it’s easier to test.</p>\n<h2 id=\"adding-tests\"><a href=\"#adding-tests\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding tests</h2>\n<p>One of the important things to do during the migration to Angular 2, is adding\ntests to the whole platform. And the new footer component has its own tests. It’s\nnothing complex or really “useful”, the tests just check if the <code class=\"language-text\">version</code>\nvariable is correctly defined. But this test has an extra purpose, it helps me\nto check the test runner and the coverage reporter are working correctly.</p>","timeToRead":3,"frontmatter":{"title":"Components migration started","date":"June 05, 2016","dateRaw":"2016-06-05","spoiler":null},"fields":{"slug":"/component-migration-started/"}}},"pageContext":{"slug":"/component-migration-started/","date":"2016-06-05","previous":{"fields":{"slug":"/first-coding-week/","directoryName":"first-coding-week"},"frontmatter":{"title":"First coding week","date":"2016-05-29"}},"next":{"fields":{"slug":"/moving-big-parts-to-angular-2/","directoryName":"moving-big-parts-to-angular-2"},"frontmatter":{"title":"Moving big parts to Angular 2","date":"2016-06-12"}}}}