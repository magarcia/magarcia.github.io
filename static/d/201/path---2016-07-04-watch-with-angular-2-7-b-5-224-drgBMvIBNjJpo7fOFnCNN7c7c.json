{"data":{"site":{"siteMetadata":{"title":"magarcia","author":"Martin Garcia"}},"markdownRemark":{"id":"2ce9419e-67eb-5a6b-a698-caabbe9dd2bc","html":"<p>In my <a href=\"/2016/07/03/events-in-angular2\">previous post</a>, I was talking about how\nto implement events from Angular 1 in Angular 2. But in the snippet of code that\nI use as an example we can find another thing that not exists in Angular 2:\n<code class=\"language-text\">$watch</code>.</p>\n<p>I start defining the problem. We can have a directive or Angular 1 component\nlike that:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> module <span class=\"token operator\">=</span> angular<span class=\"token punctuation\">.</span><span class=\"token function\">module</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"myApp\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span><span class=\"token function\">directive</span><span class=\"token punctuation\">(</span><span class=\"token string\">'exampleDirective'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    template<span class=\"token punctuation\">:</span> <span class=\"token string\">'&lt;div>{{internalVar}}&lt;/div>'</span><span class=\"token punctuation\">,</span>\n    scope<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      externalVar<span class=\"token punctuation\">:</span> <span class=\"token string\">\"=\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    controller<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>scope<span class=\"token punctuation\">,</span> element<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      scope<span class=\"token punctuation\">.</span><span class=\"token function\">$watch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'externalVar'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>newVal<span class=\"token punctuation\">,</span> oldVal<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>newVal <span class=\"token operator\">!==</span> oldVal<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          scope<span class=\"token punctuation\">.</span>internalVar <span class=\"token operator\">=</span> newVal<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>If we want to migrate this code to Angular 2 we find a trouble: the new Angular\ndon’t have <code class=\"language-text\">scope</code>, so it don’t have <code class=\"language-text\">$watch</code>. How we can watch a directive\nattribute? The solution is the <strong>set</strong> syntax from ES6.</p>\n<blockquote>\n<p>The <strong>set</strong> syntax binds an object property to a function to be called when\nthere is an attempt to set that property.</p>\n</blockquote>\n<p><em>From <a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Functions/set\">MDN</a></em></p>\n<p>So we can bind the input for a component to a function that does the same as the\n<code class=\"language-text\">$watch</code> function.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> Input <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@angular/core\"</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">\"example-component\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ExampleComponent</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> internalVal <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  @<span class=\"token function\">Input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"externalVal\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">set</span> <span class=\"token function\">updateInternalVal</span><span class=\"token punctuation\">(</span>externalVal<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>internalVal <span class=\"token operator\">=</span> externalVal<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","timeToRead":1,"frontmatter":{"title":"$watch with Angular 2","date":"July 04, 2016","dateRaw":"2016-07-04","spoiler":null},"fields":{"slug":"/watch-with-angular2/"}}},"pageContext":{"slug":"/watch-with-angular2/","date":"2016-07-04","previous":{"fields":{"slug":"/events-in-angular2/","directoryName":"events-in-angular2"},"frontmatter":{"title":"Events in Angular2","date":"2016-07-03"}},"next":{"fields":{"slug":"/todomvc-redux-starter-kit/","directoryName":"todomvc-redux-starter-kit"},"frontmatter":{"title":"Refactor TodoMVC with Redux Starter Kit","date":"2019-01-26"}}}}